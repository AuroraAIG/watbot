# Как настроить интеграцию с Клиентской Базой

### 1. Настройка интеграции

Откройте свой личный кабинет [Watbot](https://watbot.ru), выберите нужного бота и перейдите в раздел **Настройки** > **Интеграции**, выберите **Клиентская База** и введите свои данные.

![](<../../../.gitbook/assets/image (113).png>)

{% hint style="info" %}
API AuthKey находится в личном кабинете Клиентской Базы по адресу:

https://**{ваша компания}**.clientbase.ru/edit\_modules.php?module=api
{% endhint %}

После ввода своих данных нажмите **Сохранить** и убедитесь что статус интеграции **Авторизован**.

![](<../../../.gitbook/assets/image (177).png>)

### 2. Настройка таблиц

Далее необходимо настроить таблицы куда будут записываться клиенты, переписка и сделки.

![](<../../../.gitbook/assets/image (146).png>)

#### Таблица для контактов

Выберите таблицу для контактов и настройте связь полей Клиенткой Базы с полями Watbot.

![](<../../../.gitbook/assets/image (168).png>)

Для таблицы контактов доступны следующие соотношения полей:

* Имя контакта
* Телефон
* Текст (произвольный текст)
* Мессенджер
* Telegram Username

{% hint style="warning" %}
Для всех обязательных полей без значения по умолчанию в Клиентской Базе должна быть настроена связь, т.е. соотношение полей Watbot и Клиентской Базы.
{% endhint %}

#### Таблица для сделок

Настраивается аналогичным образом.

Для таблицы сделок доступны следующие соотношения полей:

* Имя контакта
* Телефон
* Текст (можете сами ввести произвольный текст)
* Мессенджер
* Telegram Username
* Связь с таблицей контактов (если в Клиентской Базе установлена связь с таблице контактов)

**Таблица для сообщений**

Настраивается аналогичным образом.

Для таблицы сделок доступны следующие соотношения полей:

* Сообщение (поле в которое передается текст сообщения)
* Связь с таблицей контактов (если в Клиентской Базе установлена связь с таблице контактов)

{% hint style="info" %}
Данные отправляются в CRM в соответствии настроек уведомлений в блоках сценария.
{% endhint %}

{% hint style="danger" %}
Если вы настроили отправку уведомлений при попадании в блок, то уберите галочку "удалить переменные после отправки заявки" в этом блоке.
{% endhint %}
