# Реферальная система

{% embed url="https://www.youtube.com/watch?v=2zfzIdfduG4" %}

{% hint style="warning" %}
В данный момент реферальная система работает только в мессенжерах Телеграм и ТамТам.
{% endhint %}

Разработали бесконечную реферальную систему, сколько уровней выбрать в реферальной программе —  решать вам! Для этого мы сделали специальное API для получения информации о рефералах — [https://docs.watbot.ru/rabota-s-api/kontakty/referalnaya-sistema](https://vk.com/away.php?to=https%3A%2F%2Fdocs.watbot.ru%2Frabota-s-api%2Fkontakty%2Freferalnaya-sistema\&cc_key=)

Чтобы отправить реферальную ссылку пользователю, добавьте в текст сообщения бота: **\{{ getInviteLink() \}}**

<figure><img src="../../../.gitbook/assets/image (198).png" alt=""><figcaption></figcaption></figure>

### Вы можете:

* работать с любым уровнем рефереров и рефералов в режиме реального времени&#x20;
* изменить реферера даже если текущий контакт имеет своих рефералов

### 1. `{{ getInviteLink() }}` - Реферальная ссылка контакта в телеграм боте.&#x20;

### 2. `{{ getReferrals() }}` - Получить список рефералов контакта первой линии (последние 100 шт).

Получить первые 10 рефералов: `{{ getReferrals(10) }}`\
Получить первые 20 рефералов с тегом "Купил": `{{ getReferrals(20,  "`[`Купил`](#user-content-fn-1)[^1]`") }}`

Работает в режиме реального времени

### 3. `{{ getReferralsCount() }}` - Получить количество рефералов всей сети контакта (всех уровней).

Получить количество рефералов с тегом "Купил": `{{ getReferralsCount("Купил") }}`

Работает в режиме реального времени

### 4. `{{ getReferrer() }}` - Получить своего реферера

* работает в режиме реального времени&#x20;
* нет ограничения по количеству линий для получения реферера

### &#x20;5. `{{ getLinkBySchema(123) }}`, где 123 - id сценария - Получить ссылку на сценарий

Особенности: Если ссылка на доп. сценарий не была создана ранее в разделе Каналы -> Telegram -> Прямые ссылки на дополнительные сценарии, то она создается автоматически

### 6. `{{ getInviteLinkWithSchema(123) }}`, где 123 - id сценария - Получить реферальную ссылку на дополнительный сценарий

### 7. `{{ getReferralsByDepth() }}`, – получить список рефералов указанной линии

* работает в режиме реального времени&#x20;
* нет ограничения по количеству линий для получения рефералов , вы можете получить рефералов хоть 100-го уровня
* имеется возможность получить рефералов любой линии с содержанием тега, пример: `{{ getReferralsByDepth(100, 10, "ИмяТега") }}`

### 8. `{{ getReferralsCountByDepth() }}` – получить количество рефералов на указанной линии

* `{{ getReferralsCountByDepth(20) }}` – получить количество рефералов 20 линии&#x20;
* `{{ getReferralsCountByDepth(5, "Купил") }}` - получить количество рефералов 5 линии, которые содержат тег «Купил»

### 9. `{{ getReferrers(10) }}` - вывести 10 рефереров

### 10. `{{ getReferrers(10, 0, "купил") }}` - вывести 10 рефереров c тегом купил&#x20;

### 11. `{{ getReferrers(10, 5, "купил") }}` - вывести 10 рефереров c тегом купил начиная с 5-го уровня

### Ссылки

**`{{ getDirectInviteLink() }}`** - прямая пригласительная ссылка через главный сценарий&#x20;

**`{{ getDirectInviteLink(123) }}`** - прямая пригласительная ссылка через сценарий 123

[^1]: 
